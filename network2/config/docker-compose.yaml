version: '2'

networks:
    fabric:

services:

    ca.tls:
        extends:
            file: nodebase.yaml
            service: ca
        container_name: ca.tls
        restart: always
        environment:
            - HYPERLEDGER_VOL=/tmp/hyperledger
            - FABRIC_CA_SERVER_HOME=/tmp/hyperledger/TLS-CA/server
            - FABRIC_CA_SERVER_CSR_CN=ca.tls
            - FABRIC_CA_SERVER_CA_NAME=ca.tls
        ports:
            - 5052:5052
        command: sh -c 'fabric-ca-server start -d -b tls-ca-admin:tls-ca-adminPW --cfg.affiliations.allowremove --cfg.identities.allowremove --port 5052'
        volumes:
            - ../scripts/container:/setup
            - ../artifacts:/tmp/hyperledger

    rca.example.com:
        extends:
            file: nodebase.yaml
            service: ca
        container_name: rca.example.com
        restart: always
        environment:
            - HYPERLEDGER_VOL=/tmp/hyperledger
            - FABRIC_CA_SERVER_HOME=/tmp/hyperledger/OrdererMSP/ca/server
            - FABRIC_CA_SERVER_CSR_CN=rca.example.com
            - FABRIC_CA_SERVER_CA_NAME=rca.example.com
        ports:
            - 5053:5053
        command: sh -c 'fabric-ca-server start -d -b rca-org0-admin:rca-org0-adminPW --cfg.affiliations.allowremove --cfg.identities.allowremove --port 5053'
        volumes:
            - ../scripts/container:/setup
            - ../artifacts:/tmp/hyperledger

    rca.org1.example.com:
        extends:
            file: nodebase.yaml
            service: ca
        container_name: rca.org1.example.com
        restart: always
        environment:
            - HYPERLEDGER_VOL=/tmp/hyperledger
            - FABRIC_CA_SERVER_HOME=/tmp/hyperledger/Org1MSP/ca/server
            - FABRIC_CA_SERVER_CSR_CN=rca.org1.example.com
            - FABRIC_CA_SERVER_CA_NAME=rca.org1.example.com
        ports:
            - 5054:5054
        command: sh -c 'fabric-ca-server start -d -b rca-org1-admin:rca-org1-adminPW --cfg.affiliations.allowremove  --cfg.identities.allowremove --port 5054'
        volumes:
            - ../scripts/container:/setup
            - ../artifacts:/tmp/hyperledger

    rca.org2.example.com:
        extends:
            file: nodebase.yaml
            service: ca
        container_name: rca.org2.example.com
        restart: always
        environment:
            - HYPERLEDGER_VOL=/tmp/hyperledger
            - FABRIC_CA_SERVER_HOME=/tmp/hyperledger/Org2MSP/ca/server
            - FABRIC_CA_SERVER_CSR_CN=rca.org2.example.com
            - FABRIC_CA_SERVER_CA_NAME=rca.org2.example.com
        ports:
            - 5055:5055
        command: sh -c 'fabric-ca-server start -d -b rca-org2-admin:rca-org2-adminPW --cfg.affiliations.allowremove  --cfg.identities.allowremove --port 5055'
        volumes:
            - ../scripts/container:/setup
            - ../artifacts:/tmp/hyperledger

    rca.org3.neworg.com:
        extends:
            file: nodebase.yaml
            service: ca
        container_name: rca.org3.neworg.com
        restart: always
        environment:
            - HYPERLEDGER_VOL=/tmp/hyperledger
            - FABRIC_CA_SERVER_HOME=/tmp/hyperledger/Org3MSP/ca/server
            - FABRIC_CA_SERVER_CSR_CN=rca.org3.neworg.com
            - FABRIC_CA_SERVER_CA_NAME=rca.org3.neworg.com
        ports:
            - 5056:5056
        command: sh -c 'fabric-ca-server start -d -b rca-org3-admin:rca-org3-adminPW --cfg.affiliations.allowremove  --cfg.identities.allowremove --port 5056'
        volumes:
            - ../scripts/container:/setup
            - ../artifacts:/tmp/hyperledger

    peer0.org1.example.com:
        extends:
            file: nodebase.yaml
            service: peer
        container_name: peer0.org1.example.com
        environment:
            - CORE_PEER_ID=peer0.org1.example.com
            - CORE_PEER_ADDRESS=peer0.org1.example.com:7051
            - CORE_PEER_LISTENADDRESS=0.0.0.0:7051
            - CORE_PEER_LOCALMSPID=Org1MSP
            - CORE_PEER_MSPCONFIGPATH=/tmp/hyperledger/Org1MSP/peer0.org1.example.com/msp
            - CORE_PEER_TLS_CERT_FILE=/tmp/hyperledger/Org1MSP/peer0.org1.example.com/tls-msp/signcerts/cert.pem
            - CORE_PEER_TLS_KEY_FILE=/tmp/hyperledger/Org1MSP/peer0.org1.example.com/tls-msp/keystore/key.pem
            - CORE_PEER_TLS_ROOTCERT_FILE=/tmp/hyperledger/Org1MSP/peer0.org1.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer1.org1.example.com:8051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.org1.example.com:7051
            - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:7052
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/Org1MSP/peer0.org1.example.com
        volumes:
            - /var/run:/host/var/run
#            - ../artifacts/production/Org1MSP/peer0.org1.example.com:/tmp/hyperledger/production
            - ../artifacts/Org1MSP/peer0.org1.example.com:/tmp/hyperledger/Org1MSP/peer0.org1.example.com
        ports:
            - 7051:7051
            - 7053:7053

    peer1.org1.example.com:
        extends:
            file: nodebase.yaml
            service: peer
        container_name: peer1.org1.example.com
        environment:
            - CORE_PEER_ID=peer1.org1.example.com
            - CORE_PEER_ADDRESS=peer1.org1.example.com:8051
            - CORE_PEER_LISTENADDRESS=0.0.0.0:8051
            - CORE_PEER_LOCALMSPID=Org1MSP
            - CORE_PEER_MSPCONFIGPATH=/tmp/hyperledger/Org1MSP/peer1.org1.example.com/msp
            - CORE_PEER_TLS_CERT_FILE=/tmp/hyperledger/Org1MSP/peer1.org1.example.com/tls-msp/signcerts/cert.pem
            - CORE_PEER_TLS_KEY_FILE=/tmp/hyperledger/Org1MSP/peer1.org1.example.com/tls-msp/keystore/key.pem
            - CORE_PEER_TLS_ROOTCERT_FILE=/tmp/hyperledger/Org1MSP/peer1.org1.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer0.org1.example.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1.org1.example.com:8051
            - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8052
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/Org1MSP/peer1.org1.example.com
        volumes:
            - /var/run:/host/var/run
#            - ../artifacts/production/Org1MSP/peer1.org1.example.com:/tmp/hyperledger/production
            - ../artifacts/Org1MSP/peer1.org1.example.com:/tmp/hyperledger/Org1MSP/peer1.org1.example.com
        ports:
            - 8051:8051
            - 8053:8053

    peer0.org2.example.com:
        extends:
            file: nodebase.yaml
            service: peer
        container_name: peer0.org2.example.com
        environment:
            - CORE_PEER_ID=peer0.org2.example.com
            - CORE_PEER_ADDRESS=peer0.org2.example.com:9051
            - CORE_PEER_LISTENADDRESS=0.0.0.0:9051
            - CORE_PEER_LOCALMSPID=Org2MSP
            - CORE_PEER_MSPCONFIGPATH=/tmp/hyperledger/Org2MSP/peer0.org2.example.com/msp
            - CORE_PEER_TLS_CERT_FILE=/tmp/hyperledger/Org2MSP/peer0.org2.example.com/tls-msp/signcerts/cert.pem
            - CORE_PEER_TLS_KEY_FILE=/tmp/hyperledger/Org2MSP/peer0.org2.example.com/tls-msp/keystore/key.pem
            - CORE_PEER_TLS_ROOTCERT_FILE=/tmp/hyperledger/Org2MSP/peer0.org2.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer1.org2.example.com:10051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.org2.example.com:9051
            - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:9052
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/Org2MSP/peer0.org2.example.com
        volumes:
            - /var/run:/host/var/run
#            - ../artifacts/production/Org2MSP/peer0.org2.example.com:/tmp/hyperledger/production
            - ../artifacts/Org2MSP/peer0.org2.example.com:/tmp/hyperledger/Org2MSP/peer0.org2.example.com
        ports:
            - 9051:9051
            - 9053:9053

    peer1.org2.example.com:
        extends:
            file: nodebase.yaml
            service: peer
        container_name: peer1.org2.example.com
        environment:
            - CORE_PEER_ID=peer1.org2.example.com
            - CORE_PEER_ADDRESS=peer1.org2.example.com:10051
            - CORE_PEER_LISTENADDRESS=0.0.0.0:10051
            - CORE_PEER_LOCALMSPID=Org2MSP
            - CORE_PEER_MSPCONFIGPATH=/tmp/hyperledger/Org2MSP/peer1.org2.example.com/msp
            - CORE_PEER_TLS_CERT_FILE=/tmp/hyperledger/Org2MSP/peer1.org2.example.com/tls-msp/signcerts/cert.pem
            - CORE_PEER_TLS_KEY_FILE=/tmp/hyperledger/Org2MSP/peer1.org2.example.com/tls-msp/keystore/key.pem
            - CORE_PEER_TLS_ROOTCERT_FILE=/tmp/hyperledger/Org2MSP/peer1.org2.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer0.org2.example.com:9051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1.org2.example.com:10051
            - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:10052
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/Org2MSP/peer1.org2.example.com
        volumes:
            - /var/run:/host/var/run
#            - ../artifacts/production/Org2MSP/peer1.org2.example.com:/tmp/hyperledger/production
            - ../artifacts/Org2MSP/peer1.org2.example.com:/tmp/hyperledger/Org2MSP/peer1.org2.example.com
        ports:
            - 10051:10051
            - 10053:10053

    peer0.org3.neworg.com:
        extends:
            file: nodebase.yaml
            service: peer
        container_name: peer0.org3.neworg.com
        environment:
            - CORE_PEER_ID=peer0.org3.neworg.com
            - CORE_PEER_ADDRESS=peer0.org3.neworg.com:11051
            - CORE_PEER_LISTENADDRESS=0.0.0.0:11051
            - CORE_PEER_LOCALMSPID=Org3MSP
            - CORE_PEER_MSPCONFIGPATH=/tmp/hyperledger/Org3MSP/peer0.org3.neworg.com/msp
            - CORE_PEER_TLS_CERT_FILE=/tmp/hyperledger/Org3MSP/peer0.org3.neworg.com/tls-msp/signcerts/cert.pem
            - CORE_PEER_TLS_KEY_FILE=/tmp/hyperledger/Org3MSP/peer0.org3.neworg.com/tls-msp/keystore/key.pem
            - CORE_PEER_TLS_ROOTCERT_FILE=/tmp/hyperledger/Org3MSP/peer0.org3.neworg.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer1.org3.neworg.com:12051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.org3.neworg.com:11051
            - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:11052
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/Org3MSP/peer0.org3.neworg.com
        volumes:
            - /var/run:/host/var/run
#            - ../artifacts/production/Org3MSP/peer0.org3.neworg.com:/tmp/hyperledger/production
            - ../artifacts/Org3MSP/peer0.org3.neworg.com:/tmp/hyperledger/Org3MSP/peer0.org3.neworg.com
        ports:
            - 11051:11051
            - 11053:11053

    peer1.org3.neworg.com:
        extends:
            file: nodebase.yaml
            service: peer
        container_name: peer1.org3.neworg.com
        environment:
            - CORE_PEER_ID=peer1.org3.neworg.com
            - CORE_PEER_ADDRESS=peer1.org3.neworg.com:12051
            - CORE_PEER_LISTENADDRESS=0.0.0.0:12051
            - CORE_PEER_LOCALMSPID=Org3MSP
            - CORE_PEER_MSPCONFIGPATH=/tmp/hyperledger/Org3MSP/peer1.org3.neworg.com/msp
            - CORE_PEER_TLS_CERT_FILE=/tmp/hyperledger/Org3MSP/peer1.org3.neworg.com/tls-msp/signcerts/cert.pem
            - CORE_PEER_TLS_KEY_FILE=/tmp/hyperledger/Org3MSP/peer1.org3.neworg.com/tls-msp/keystore/key.pem
            - CORE_PEER_TLS_ROOTCERT_FILE=/tmp/hyperledger/Org3MSP/peer1.org3.neworg.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer0.org3.neworg.com:11051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1.org3.neworg.com:12051
            - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:12052
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/Org3MSP/peer1.org3.neworg.com
        volumes:
            - /var/run:/host/var/run
#            - ../artifacts/production/Org3MSP/peer1.org3.neworg.com:/tmp/hyperledger/production
            - ../artifacts/Org3MSP/peer1.org3.neworg.com:/tmp/hyperledger/Org3MSP/peer1.org3.neworg.com
        ports:
            - 12051:12051
            - 12053:12053

    orderer1.example.com:
        extends:
            file: nodebase.yaml
            service: orderer
        container_name: orderer1.example.com
        environment:
            - ORDERER_HOST=orderer1.example.com
            - ORDERER_HOME=/tmp/hyperledger/orderer
            - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
            - ORDERER_GENERAL_LOCALMSPDIR=/tmp/hyperledger/OrdererMSP/orderer1.example.com/msp
            - ORDERER_GENERAL_TLS_CERTIFICATE=/tmp/hyperledger/OrdererMSP/orderer1.example.com/tls-msp/signcerts/cert.pem
            - ORDERER_GENERAL_TLS_PRIVATEKEY=/tmp/hyperledger/OrdererMSP/orderer1.example.com/tls-msp/keystore/key.pem
            - ORDERER_GENERAL_TLS_ROOTCAS=[/tmp/hyperledger/OrdererMSP/orderer1.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem]
            - ORDERER_GENERAL_GENESISFILE=/tmp/hyperledger/OrdererMSP/orderer1.example.com/genesis.block
            - ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/tmp/hyperledger/OrdererMSP/orderer1.example.com/tls-msp/signcerts/cert.pem
            - ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/tmp/hyperledger/OrdererMSP/orderer1.example.com/tls-msp/keystore/key.pem
            - ORDERER_GENERAL_CLUSTER_ROOTCAS=[/tmp/hyperledger/OrdererMSP/orderer1.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem]
            - ORDERER_GENERAL_LISTENPORT=7050
        volumes:
#            - ../artifacts/production/OrdererMSP/orderer1.example.com:/tmp/hyperledger/production
            - ../artifacts/OrdererMSP/orderer1.example.com:/tmp/hyperledger/OrdererMSP/orderer1.example.com
        ports:
            - 7050:7050

    orderer2.example.com:
        extends:
            file: nodebase.yaml
            service: orderer
        container_name: orderer2.example.com
        environment:
            - ORDERER_HOST=orderer2.example.com
            - ORDERER_HOME=/tmp/hyperledger/orderer
            - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
            - ORDERER_GENERAL_LOCALMSPDIR=/tmp/hyperledger/OrdererMSP/orderer2.example.com/msp
            - ORDERER_GENERAL_TLS_CERTIFICATE=/tmp/hyperledger/OrdererMSP/orderer2.example.com/tls-msp/signcerts/cert.pem
            - ORDERER_GENERAL_TLS_PRIVATEKEY=/tmp/hyperledger/OrdererMSP/orderer2.example.com/tls-msp/keystore/key.pem
            - ORDERER_GENERAL_TLS_ROOTCAS=[/tmp/hyperledger/OrdererMSP/orderer2.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem]
            - ORDERER_GENERAL_GENESISFILE=/tmp/hyperledger/OrdererMSP/orderer2.example.com/genesis.block
            - ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/tmp/hyperledger/OrdererMSP/orderer2.example.com/tls-msp/signcerts/cert.pem
            - ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/tmp/hyperledger/OrdererMSP/orderer2.example.com/tls-msp/keystore/key.pem
            - ORDERER_GENERAL_CLUSTER_ROOTCAS=[/tmp/hyperledger/OrdererMSP/orderer2.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem]
            - ORDERER_GENERAL_LISTENPORT=7150
        volumes:
#            - ../artifacts/production/OrdererMSP/orderer2.example.com:/tmp/hyperledger/production
            - ../artifacts/OrdererMSP/orderer2.example.com:/tmp/hyperledger/OrdererMSP/orderer2.example.com
        ports:
            - 7150:7150

    orderer3.example.com:
        extends:
            file: nodebase.yaml
            service: orderer
        container_name: orderer3.example.com
        environment:
            - ORDERER_HOST=orderer3.example.com
            - ORDERER_HOME=/tmp/hyperledger/orderer
            - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
            - ORDERER_GENERAL_LOCALMSPDIR=/tmp/hyperledger/OrdererMSP/orderer3.example.com/msp
            - ORDERER_GENERAL_TLS_CERTIFICATE=/tmp/hyperledger/OrdererMSP/orderer3.example.com/tls-msp/signcerts/cert.pem
            - ORDERER_GENERAL_TLS_PRIVATEKEY=/tmp/hyperledger/OrdererMSP/orderer3.example.com/tls-msp/keystore/key.pem
            - ORDERER_GENERAL_TLS_ROOTCAS=[/tmp/hyperledger/OrdererMSP/orderer3.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem]
            - ORDERER_GENERAL_GENESISFILE=/tmp/hyperledger/OrdererMSP/orderer3.example.com/genesis.block
            - ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/tmp/hyperledger/OrdererMSP/orderer3.example.com/tls-msp/signcerts/cert.pem
            - ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/tmp/hyperledger/OrdererMSP/orderer3.example.com/tls-msp/keystore/key.pem
            - ORDERER_GENERAL_CLUSTER_ROOTCAS=[/tmp/hyperledger/OrdererMSP/orderer3.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem]
            - ORDERER_GENERAL_LISTENPORT=7250
        volumes:
#            - ../artifacts/production/OrdererMSP/orderer3.example.com:/tmp/hyperledger/production
            - ../artifacts/OrdererMSP/orderer3.example.com:/tmp/hyperledger/OrdererMSP/orderer3.example.com
        ports:
            - 7250:7250

    orderer4.example.com:
        extends:
            file: nodebase.yaml
            service: orderer
        container_name: orderer4.example.com
        environment:
            - ORDERER_HOST=orderer4.example.com
            - ORDERER_HOME=/tmp/hyperledger/orderer
            - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
            - ORDERER_GENERAL_LOCALMSPDIR=/tmp/hyperledger/OrdererMSP/orderer4.example.com/msp
            - ORDERER_GENERAL_TLS_CERTIFICATE=/tmp/hyperledger/OrdererMSP/orderer4.example.com/tls-msp/signcerts/cert.pem
            - ORDERER_GENERAL_TLS_PRIVATEKEY=/tmp/hyperledger/OrdererMSP/orderer4.example.com/tls-msp/keystore/key.pem
            - ORDERER_GENERAL_TLS_ROOTCAS=[/tmp/hyperledger/OrdererMSP/orderer4.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem]
            - ORDERER_GENERAL_GENESISFILE=/tmp/hyperledger/OrdererMSP/orderer4.example.com/genesis.block
            - ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/tmp/hyperledger/OrdererMSP/orderer4.example.com/tls-msp/signcerts/cert.pem
            - ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/tmp/hyperledger/OrdererMSP/orderer4.example.com/tls-msp/keystore/key.pem
            - ORDERER_GENERAL_CLUSTER_ROOTCAS=[/tmp/hyperledger/OrdererMSP/orderer4.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem]
            - ORDERER_GENERAL_LISTENPORT=7350
        volumes:
#            - ../artifacts/production/OrdererMSP/orderer4.example.com:/tmp/hyperledger/production
            - ../artifacts/OrdererMSP/orderer4.example.com:/tmp/hyperledger/OrdererMSP/orderer4.example.com
        ports:
            - 7350:7350

    orderer5.example.com:
        extends:
            file: nodebase.yaml
            service: orderer
        container_name: orderer5.example.com
        environment:
            - ORDERER_HOST=orderer5.example.com
            - ORDERER_HOME=/tmp/hyperledger/orderer
            - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
            - ORDERER_GENERAL_LOCALMSPDIR=/tmp/hyperledger/OrdererMSP/orderer5.example.com/msp
            - ORDERER_GENERAL_TLS_CERTIFICATE=/tmp/hyperledger/OrdererMSP/orderer5.example.com/tls-msp/signcerts/cert.pem
            - ORDERER_GENERAL_TLS_PRIVATEKEY=/tmp/hyperledger/OrdererMSP/orderer5.example.com/tls-msp/keystore/key.pem
            - ORDERER_GENERAL_TLS_ROOTCAS=[/tmp/hyperledger/OrdererMSP/orderer5.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem]
            - ORDERER_GENERAL_GENESISFILE=/tmp/hyperledger/OrdererMSP/orderer5.example.com/genesis.block
            - ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/tmp/hyperledger/OrdererMSP/orderer5.example.com/tls-msp/signcerts/cert.pem
            - ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/tmp/hyperledger/OrdererMSP/orderer5.example.com/tls-msp/keystore/key.pem
            - ORDERER_GENERAL_CLUSTER_ROOTCAS=[/tmp/hyperledger/OrdererMSP/orderer5.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem]
            - ORDERER_GENERAL_LISTENPORT=7450
        volumes:
#            - ../artifacts/production/OrdererMSP/orderer5.example.com:/tmp/hyperledger/production
            - ../artifacts/OrdererMSP/orderer5.example.com:/tmp/hyperledger/OrdererMSP/orderer5.example.com
        ports:
            - 7450:7450

    cli.org1.example.com:
        extends:
            file: nodebase.yaml
            service: cli
        container_name: cli.org1.example.com
        environment:
            - HYPERLEDGER_VOL=/tmp/hyperledger
            - CORE_PEER_ID=cli.org1.example.com
            - CORE_PEER_ADDRESS=peer0.org1.example.com:7051
            - CORE_PEER_LOCALMSPID=Org1MSP
            - CORE_PEER_TLS_ROOTCERT_FILE=/tmp/hyperledger/Org1MSP/peer0.org1.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem
            - CORE_PEER_MSPCONFIGPATH=/tmp/hyperledger/Org1MSP/peer0.org1.example.com/msp
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/org1.example.com
        command: sh
        volumes:
            - ../artifacts:/tmp/hyperledger
            - ../scripts/container:/setup
            - ../../packages/chaincode:/opt/gopath/src/github.com/hyperledger/fabric/chaincode

    cli.org2.example.com:
        extends:
            file: nodebase.yaml
            service: cli
        container_name: cli.org2.example.com
        environment:
            - HYPERLEDGER_VOL=/tmp/hyperledger
            - CORE_PEER_ID=cli.org2.example.com
            - CORE_PEER_ADDRESS=peer0.org2.example.com:9051
            - CORE_PEER_LOCALMSPID=Org2MSP
            - CORE_PEER_TLS_ROOTCERT_FILE=/tmp/hyperledger/Org2MSP/peer0.org2.example.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem
            - CORE_PEER_MSPCONFIGPATH=/tmp/hyperledger/Org2MSP/peer0.org2.example.com/msp
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/org2.example.com
        command: sh
        volumes:
            - ../artifacts:/tmp/hyperledger
            - ../scripts/container:/setup
            - ../../packages/chaincode:/opt/gopath/src/github.com/hyperledger/fabric/chaincode

    cli.org3.neworg.com:
        extends:
            file: nodebase.yaml
            service: cli
        container_name: cli.org3.neworg.com
        environment:
            - HYPERLEDGER_VOL=/tmp/hyperledger
            - CORE_PEER_ID=cli.org3.neworg.com
            - CORE_PEER_ADDRESS=peer0.org3.neworg.com:11051
            - CORE_PEER_LOCALMSPID=Org3MSP
            - CORE_PEER_TLS_ROOTCERT_FILE=/tmp/hyperledger/Org3MSP/peer0.org3.neworg.com/tls-msp/tlscacerts/tls-0-0-0-0-5052.pem
            - CORE_PEER_MSPCONFIGPATH=/tmp/hyperledger/Org3MSP/peer0.org3.neworg.com/msp
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/org3.neworg.com
        command: sh
        volumes:
            - ../artifacts:/tmp/hyperledger
            - ../scripts/container:/setup
            - ../../packages/chaincode:/opt/gopath/src/github.com/hyperledger/fabric/chaincode

    postgres01:
        container_name: postgres01
        image: postgres
        environment:
            - POSTGRES_PASSWORD=docker
            - POSTGRES_USER=postgres
            - POSTGRES_DB=postgres
        volumes:
            - ../artifacts/postgres01:/var/lib/postgresql/data
        command: postgres
        ports:
            - 5432:5432
        networks:
            - fabric

    cadvisor:
        container_name: cadvisor
        image: google/cadvisor
        restart: always
        volumes:
            - /:/rootfs:ro
            - /var/run:/var/run:ro
            - /sys:/sys:ro
            - /var/lib/docker/:/var/lib/docker:ro
            - /dev/disk/:/dev/disk:ro
        ports:
            - 8080:8080
