apiVersion: v1
kind: Pod
metadata:
  name: fabric-tools
spec:
  volumes:
    - name: fabricfiles
      persistentVolumeClaim:
        claimName: task-pv-claim
    - name: dockersocket
      hostPath:
        path: /var/run/docker.sock
  containers:
    - name: fabrictools
      image: hyperledger/fabric-tools:1.4.3
      command: ["sh", "-c", "sleep 48h"]
      env:
        - name: TZ
          value: "Asia/Hong_Kong"
        - name: FABRIC_CFG_PATH
          value: "/etc/hyperledger/fabric/"
        - name: GOPATH
          value: /opt/gopath
        - name: FABRIC_LOGGING_SPEC
          value: debug
        - name: CORE_PEER_ID
          value: cli
        - name: CORE_PEER_TLS_ENABLE
          value: "true"
        - name: CORE_VM_ENDPOINT
          value: "unix:///host/var/run/docker.sock"
      volumeMounts:
        - mountPath: /var/artifacts
          name: fabricfiles
        - mountPath: /host/var/run/docker.sock
          name: dockersocket
